<%# app/views/customers/index.html.erb %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RetailBuddy - Customer Management</title>

    <%# Link necessary stylesheets directly %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "dashboard", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "customers", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "custom", "data-turbo-track": "reload" %>

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= javascript_importmap_tags %>

    <%# External Fonts/Icons %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

</head>
<body>

    <%# Top navigation header removed as requested %>

    <div class="customers-page-container">

      <div class="customers-header"> <%# This header is for the page content title/actions %>
        <h1 class="customers-title">Customer Management</h1>
        <div class="customers-actions">
           <%# Link to add new customer page (uses route generated by `resources :customers`) %>
           <%= link_to "Add New Customer", new_customer_path, class: "action-btn primary" %>
        </div>
      </div>

      <div class="customer-controls">
          <div class="input-group">
            <div class="input-field">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search Name, Email, or Phone..." class="w-full">
            </div>
          </div>
           <button class="action-btn">Search</button> <%# Placeholder %>
      </div>

      <div class="customers-table-container">
        <table class="customers-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Address</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <%# Check if @customers is defined and not empty %>
            <% if defined?(@customers) && @customers.present? %>
              <%# Loop through your @customers here %>
              <% @customers.each do |customer| %>
                <tr>
                  <%# Use correct attribute names based on your Customer model / ERD %>
                  <td><%= customer.try(:Name) || "N/A" %></td>
                  <td><%= customer.try(:Email) || "N/A" %></td>
                  <td><%= customer.try(:Phone) || "N/A" %></td>
                  <td class="customer-address"><%= customer.try(:Address) || "N/A" %></td>
                  <td class="table-actions">
                     <%= link_to '<i class="fas fa-edit"></i>'.html_safe, edit_customer_path(customer) %>
                     <%= button_to '<i class="fas fa-trash"></i>'.html_safe, customer_path(customer), method: :delete, class: 'delete-btn', form: { data: { turbo_confirm: 'Are you sure?' } } %>
                  </td>
                </tr>
               <% end %>
            <% else %>
               <tr>
                  <td colspan="5" class="no-customers-message">No customers found. Add a new customer to get started.</td>
               </tr>
            <% end %>
            <%# --- SAMPLE DATA ROWS (REMOVE LATER) --- %>
             <tr>
                 <td>Aarav Sharma</td>
                 <td>aarav.sharma@email.com</td>
                 <td>98XXXXXX01</td>
                 <td class="customer-address">123 MG Road, Bengaluru, KA 560001</td>
                 <td class="table-actions">
                     <a href="#"><i class="fas fa-edit"></i></a>
                     <button class="delete-btn"><i class="fas fa-trash"></i></button>
                 </td>
             </tr>
              <tr>
                 <td>Priya Singh</td>
                 <td>priya.s@email.com</td>
                 <td>99XXXXXX02</td>
                 <td class="customer-address">45 Koramangala 5th Block, Bengaluru, KA 560095</td>
                 <td class="table-actions">
                     <a href="#"><i class="fas fa-edit"></i></a>
                     <button class="delete-btn"><i class="fas fa-trash"></i></button>
                 </td>
             </tr>
             <%# --- END SAMPLE DATA ROWS --- %>
          </tbody>
        </table>
      </div>

    </div> <%# End customers-page-container %>

</body>
</html>